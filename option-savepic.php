<?php/** * * 相关图片收藏页面， * * @uses add_theme_page()    * @uses add_action() * * @return html */function limiwu_savepic_setting(){  add_theme_page(__('收藏的图片','limiwu'),__('收藏的图片','limiwu'), 'subscriber', 'savepic_setting_subscriber','limiwu_savepic_page');  add_theme_page(__('收藏的图片','limiwu'),__('收藏的图片','limiwu'), 'contributor', 'savepic_setting_contributor','limiwu_savepic_page');  add_theme_page(__('收藏的图片','limiwu'),__('收藏的图片','limiwu'), 'author', 'savepic_setting_author','limiwu_savepic_page');  add_theme_page(__('收藏的图片','limiwu'),__('收藏的图片','limiwu'), 'editor', 'savepic_setting_editor','limiwu_savepic_page');  add_theme_page(__('收藏的图片','limiwu'),__('收藏的图片','limiwu'), 'administrator', 'savepic_setting','limiwu_savepic_page');}   add_action('admin_menu', 'limiwu_savepic_setting');/** * 查询数据库，返回用户收藏图片 * * @package limiwuCom * @author annanzi/910109610@qq.com * @since 2019-11-10 * @return array */function limiwu_select_pic($user,$customer_id =''){    global $wpdb;    $i = 0;    //$customerId = $wpdb->escape($customer_id);    $user = $wpdb->escape($user);    $table_name = $wpdb->prefix . "imgTable";    $table_name = $wpdb->escape($table_name);    if ($customer_id == '') {	    $sql = $wpdb->get_results("SELECT * FROM $table_name WHERE `user_id`= $user order by `time` DESC");	}	foreach ($sql as $array) {        $arr[$i]['src'] = $array->src;        $arr[$i]['cid'] = $array->customer_id;        $arr[$i]['time'] = $array->time;        $arr[$i]['pid'] = $array->post_id;        $i ++;    }    return $arr;  }/** * 输出收藏的图片 */function limiwu_savepic_page(){  echo '<h2>'.__('收藏的图片','limiwu').'</h2><hr>';  echo "<pre>";  print_r(limiwu_select_pic(get_current_user_id()));  echo "</pre>";}?>